"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8385],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>y});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(r),h=o,y=u["".concat(l,".").concat(h)]||u[h]||d[h]||a;return r?n.createElement(y,i(i({ref:t},p),{},{components:r})):n.createElement(y,i({ref:t},p))}));function y(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},2359:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={sidebar_position:1,title:"README"},i=void 0,s={unversionedId:"Python/Elasticsearch-backup/README",id:"Python/Elasticsearch-backup/README",title:"README",description:"Backup and restore scripts for Elastic Search",source:"@site/docs/Python/Elasticsearch-backup/README.md",sourceDirName:"Python/Elasticsearch-backup",slug:"/Python/Elasticsearch-backup/",permalink:"/notebook/docs/Python/Elasticsearch-backup/",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Python/Elasticsearch-backup/README.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"README"},sidebar:"tutorialSidebar",previous:{title:"Elasticsearch backup",permalink:"/notebook/docs/category/elasticsearch-backup"},next:{title:"backup",permalink:"/notebook/docs/Python/Elasticsearch-backup/backup"}},l={},c=[{value:"Backup and restore scripts for Elastic Search",id:"backup-and-restore-scripts-for-elastic-search",level:2},{value:"How to backup",id:"how-to-backup",level:2},{value:"How to restore",id:"how-to-restore",level:2},{value:"Testing",id:"testing",level:2},{value:"License",id:"license",level:2}],p={toc:c};function u(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"backup-and-restore-scripts-for-elastic-search"},"Backup and restore scripts for Elastic Search"),(0,o.kt)("p",null,"These python scripts were written with the following in mind:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Must work on our production system (so python + requests and not much else)"),(0,o.kt)("li",{parentName:"ul"},"Must take all the settings and mappings"),(0,o.kt)("li",{parentName:"ul"},"Must put it all in one file for easy backup"),(0,o.kt)("li",{parentName:"ul"},"One-liners with simple config")),(0,o.kt)("h2",{id:"how-to-backup"},"How to backup"),(0,o.kt)("p",null,'Choose your index, e.g. "myindex". Currently only does one index at a time, but there\'s nothing to stop you calling it more than once :-)'),(0,o.kt)("p",null,"Make sure your user has permission to write to the current working directory (you can do this in your home dir no problems)."),(0,o.kt)("p",null,"If Elastic Search is running on your local machine and the default port (9200), you can just run it like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python backup.py myindex\n")),(0,o.kt)("p",null,"If you need a different host, you can do this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python backup.py myindex eshost\n")),(0,o.kt)("p",null,"If you also need a different port, you can do this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python backup.py myindex eshost esport\n")),(0,o.kt)("p",null,"This will generate a file called (myindex).esbackup. You only need this file - its all contained."),(0,o.kt)("h2",{id:"how-to-restore"},"How to restore"),(0,o.kt)("p",null,"Copy the (myindex).esbackup to whatever server you want to run it on."),(0,o.kt)("p",null,"Options are the same as for the backup script. To restore on default host:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python restore.py myindex\n")),(0,o.kt)("p",null,"Non default host:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python restore.py myindex eshost\n")),(0,o.kt)("p",null,"Non default port too:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ python restore.py myindex eshost esport\n")),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("p",null,"We've tested this with our ES setup and its good for us. If there's any problems or improvements, please submit a pull request!"),(0,o.kt)("p",null,'Please do not submit patches to make it "more pythonic".'),(0,o.kt)("h2",{id:"license"},"License"),(0,o.kt)("p",null,"MIT License, see LICENSE"))}u.isMDXComponent=!0}}]);
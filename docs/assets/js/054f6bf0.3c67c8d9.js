"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[54450],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var i=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=i.createContext({}),s=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=s(e.components);return i.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(t),m=o,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return t?i.createElement(h,a(a({ref:n},c),{},{components:t})):i.createElement(h,a({ref:n},c))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,a=new Array(r);a[0]=m;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[u]="string"==typeof e?e:o,a[1]=p;for(var s=2;s<r;s++)a[s]=t[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},77560:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var i=t(87462),o=(t(67294),t(3905));const r={},a="how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server",p={unversionedId:"Nginx/how-to-install-and-secure-phpmyadmin-with-nginx",id:"Nginx/how-to-install-and-secure-phpmyadmin-with-nginx",title:"how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server",description:"https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server",source:"@site/docs/Nginx/how-to-install-and-secure-phpmyadmin-with-nginx.md",sourceDirName:"Nginx",slug:"/Nginx/how-to-install-and-secure-phpmyadmin-with-nginx",permalink:"/notebook/docs/Nginx/how-to-install-and-secure-phpmyadmin-with-nginx",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Nginx/how-to-install-and-secure-phpmyadmin-with-nginx.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"how-to-configure-ssl-for-a-subdomain-on-nginx",permalink:"/notebook/docs/Nginx/how-to-configure-ssl-for-a-subdomain-on-nginx"},next:{title:"Installing nginx",permalink:"/notebook/docs/Nginx/installingNgnix"}},l={},s=[],c={toc:s};function u(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,i.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server"},"how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server"},"https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-with-nginx-on-an-ubuntu-14-04-server")),(0,o.kt)("p",null,"Posted Aug 6, 2014"),(0,o.kt)("p",null,"##Step One \u2014 Install phpMyAdmin"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo apt-get update\nsudo apt-get install phpmyadmin\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-etc/nginx/site-available/default"},"\n    location /phpmyadmin {\n           root /usr/share/;\n           index index.php index.html index.htm;\n           location ~ ^/phpmyadmin/(.+\\.php)$ {\n                   try_files $uri =404;\n                   root /usr/share/;\n                   fastcgi_pass 127.0.0.1:9000; # unix:/var/run/php5-fpm.sock; # or 127.0.0.1:9000\n                   fastcgi_index index.php;\n                   #fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n                   include fastcgi_params;\n           }\n           location ~* ^/phpmyadmin/(.+\\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {\n                   root /usr/share/;\n           }\n    }\n    location /phpMyAdmin {\n           rewrite ^/* /phpmyadmin last;\n    }\n\n")),(0,o.kt)("p",null,"A final item that we need to address is enabling the mcrypt PHP module, which phpMyAdmin relies on. This was installed with phpMyAdmin so we just need to toggle it on and restart our PHP processor:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo php5enmod mcrypt\nsudo service php5-fpm restart\n")),(0,o.kt)("p",null,"##Setting up a Web Server Authentication Gate"),(0,o.kt)("p",null,"To create an encrypted password, type:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"openssl passwd\n")),(0,o.kt)("p",null,"You will be prompted to enter and confirm the password that you wish to use. The utility will then display an encrypted version of the password that will look something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"jZZF8iY7DJrVE\n")),(0,o.kt)("p",null,"Copy this value, as you will need to paste it into the authentication file we will be creating."),(0,o.kt)("p",null,"Now, create an authentication file. We will call this file pma_pass and place it in the Nginx configuration directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo nano /etc/nginx/pma_pass\n")),(0,o.kt)("p",null,"Within this file, you simply need to specify the username you would like to use, followed by a colon (:), followed by the encrypted version of your password you received from the openssl passwd utility."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    adminum:jZZF8iY7DJrVE (=Rcn1aPXb)\n")),(0,o.kt)("p",null,"Now, we are ready to modify our Nginx configuration file. Open this file in your text editor to get started:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo nano /etc/nginx/sites-available/default\n")),(0,o.kt)("p",null,"After we are finished, the file should look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'server {\n    . . .\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    location /nothingtosee {\n        auth_basic "Admin Login";\n        auth_basic_user_file /etc/nginx/pma_pass;\n    }\n\n    . . .\n}\n')),(0,o.kt)("p",null,"and test your nginx  confiure file"),(0,o.kt)("p",null,"##php5-cgi ou php5-fpm"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"nginx -t\n\n# Install PHP\n# -qq implies -y --force-yes\nsudo apt-get install -qq php5-cli php5-fpm php5-mysql php5-pgsql php5-sqlite php5-curl php5-gd php5-gmp php5-mcrypt php5-memcached php5-imagick php5-intl php5-xdebug\n")),(0,o.kt)("h1",{id:"set-php-fpm-to-listen-on-tcp-instead-of-socket"},"Set PHP FPM to listen on TCP instead of Socket"),(0,o.kt)("p",null,'sudo sed -i "s/listen =.*/listen = 127.0.0.1:9000/" /etc/php5/fpm/pool.d/www.conf'),(0,o.kt)("h1",{id:"set-php-fpm-allowed-clients-ip-address"},"Set PHP FPM allowed clients IP address"),(0,o.kt)("p",null,'sudo sed -i "s/;listen.allowed_clients/listen.allowed_clients/" /etc/php5/fpm/pool.d/www.conf    '),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"activer php-apc extension")),(0,o.kt)("p",null,"  apt-get install php-apc"),(0,o.kt)("p",null,"  nano /etc/php5/mods-available/apcu.ini"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"extension=apc.so\n\napc.enabled=1\napc.shm_size=128M\napc.ttl=3600\napc.user_ttl=7200\napc.gc_ttl=3600\napc.max_file_size=1M\n")),(0,o.kt)("p",null,"  service php5-fpm restart"))}u.isMDXComponent=!0}}]);
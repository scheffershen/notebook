"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[83685],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},y=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),y=r,m=u["".concat(c,".").concat(y)]||u[y]||d[y]||a;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=y;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}y.displayName="MDXCreateElement"},4478:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={sidebar_position:5,slug:"How-To-Use-Rsync-to-Sync-Local-and-Remote-Directories-on-a-VPS"},i="How To Use Rsync to Sync Local and Remote Directories on a VPS",s={unversionedId:"Linux/backup/How To Use Rsync to Sync Local and Remote Directories on a VPS",id:"Linux/backup/How To Use Rsync to Sync Local and Remote Directories on a VPS",title:"How To Use Rsync to Sync Local and Remote Directories on a VPS",description:"https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps",source:"@site/docs/Linux/backup/How To Use Rsync to Sync Local and Remote Directories on a VPS.md",sourceDirName:"Linux/backup",slug:"/Linux/backup/How-To-Use-Rsync-to-Sync-Local-and-Remote-Directories-on-a-VPS",permalink:"/notebook/docs/Linux/backup/How-To-Use-Rsync-to-Sync-Local-and-Remote-Directories-on-a-VPS",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Linux/backup/How To Use Rsync to Sync Local and Remote Directories on a VPS.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,slug:"How-To-Use-Rsync-to-Sync-Local-and-Remote-Directories-on-a-VPS"},sidebar:"tutorialSidebar",previous:{title:"How To Set Up Sudo and SSH Keys on Ubuntu 14.04",permalink:"/notebook/docs/Linux/backup/How-To-Set-Up-Sudo-and-SSH-Keys-on-Ubuntu-14.04"},next:{title:"Backup manager",permalink:"/notebook/docs/category/backup-manager"}},c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"What Is Rsync?",id:"what-is-rsync",level:2},{value:"Basic Syntax",id:"basic-syntax",level:2},{value:"How To Use Rsync to Sync with a Remote System",id:"how-to-use-rsync-to-sync-with-a-remote-system",level:2},{value:"Useful Options for Rsync",id:"useful-options-for-rsync",level:2}],p={toc:l};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps"},"How To Use Rsync to Sync Local and Remote Directories on a VPS"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps"},"https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps")),(0,r.kt)("p",null,"September 10, 2013"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Rsync"),', which stands for "remote sync", is a remote and local file synchronization tool. It uses an algorithm that minimizes the amount of data copied by only moving the portions of files that have changed.'),(0,r.kt)("h2",{id:"what-is-rsync"},"What Is Rsync?"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Rsync")," is a very flexible network-enabled syncing tool."),(0,r.kt)("h2",{id:"basic-syntax"},"Basic Syntax"),(0,r.kt)("p",null,"To sync the contents of dir1 to dir2 ",(0,r.kt)("inlineCode",{parentName:"p"},"on the same system"),", type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -r dir1/ dir2\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"-r")," option means recursive, which is necessary for directory syncing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -a dir1/ dir2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'a: option is a combination flag. It stands for "archive" and syncs recursively and preserves symbolic links, special and device files, modification times, group, owner, and permissions. It is more commonly used than ',(0,r.kt)("inlineCode",{parentName:"p"},"-r")," and is usually what you want to use."),(0,r.kt)("p",{parentName:"li"},"  $ rsync -anv dir1/ dir2"))),(0,r.kt)("p",null,"Always double-check your arguments before executing an ",(0,r.kt)("inlineCode",{parentName:"p"},"rsync")," command. ",(0,r.kt)("inlineCode",{parentName:"p"},"Rsync")," provides a method for doing this by passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"-n")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"--dry-run")," options. The ",(0,r.kt)("inlineCode",{parentName:"p"},"-v")," flag (for verbose) is also necessary to get the appropriate output:"),(0,r.kt)("h2",{id:"how-to-use-rsync-to-sync-with-a-remote-system"},"How To Use Rsync to Sync with a Remote System"),(0,r.kt)("p",null,"Syncing to a remote system is trivial if you have SSH access to the remote machine and ",(0,r.kt)("inlineCode",{parentName:"p"},"rsync")," installed on both sides. If you need to set up SSH keys, click here."),(0,r.kt)("p",null,"you can sync the ",(0,r.kt)("inlineCode",{parentName:"p"},"dir1")," folder from earlier to a remote computer by using this syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -azP --delete /var/www/otsuka vm01@37.187.165.154:/home/vm01\n$ rsync -azP --delete adminum@164.132.21.138:/var/www/astreinte-otsuka.medica-source.com .\n")),(0,r.kt)("p",null,"It is used to sync a remote directory to the local system."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -a backup@164.132.21.137:/var/www/otsuka /home/backup\n")),(0,r.kt)("h2",{id:"useful-options-for-rsync"},"Useful Options for Rsync"),(0,r.kt)("p",null,"If you are transferring files that have not already been compressed, like text files, you can reduce the network transfer by adding compression with the ",(0,r.kt)("inlineCode",{parentName:"p"},"-z")," option:\n`\n$ rsync -az source destination"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"-P")," flag is very helpful. It combines the flags ",(0,r.kt)("inlineCode",{parentName:"p"},"--progress")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"--partial"),". The first of these gives you a progress bar for the transfers and the second allows you to resume interrupted transfers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -azP source destination\n")),(0,r.kt)("p",null,"In order to keep two directories truly in sync, it is necessary to delete files from the destination directory if they are removed from the source. By default, ",(0,r.kt)("inlineCode",{parentName:"p"},"rsync")," does not delete anything from the destination directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -azP --delete source destination\n")),(0,r.kt)("p",null,"If you wish to exclude certain files or directories located inside a directory you are syncing, you can do so by specifying them in a comma-separated list following the ",(0,r.kt)("inlineCode",{parentName:"p"},"--exclude=")," option:    "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -azP --delete -exclude=pattern_to_exclude source destination\n\n$ rsync -azP --delete --exclude=otsuka/app/cache --exclude=otsuka/app/logs /var/www/otsuka vm01@37.187.165.154:/home/vm01\n")),(0,r.kt)("p",null,"If we have specified a pattern to exclude, we can override that exclusion for files that match a different pattern by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"--include=")," option.    "),(0,r.kt)("p",null,"Finally, rsync\u2019s --backup option can be used to store backups of important files. It is used in conjunction with the ",(0,r.kt)("inlineCode",{parentName:"p"},"--backup-dir")," option, which specifies the directory where the backup files should be stored."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ rsync -a --delete --backup --backup-dir=/path/to/backups /path/to/source destination\n")))}u.isMDXComponent=!0}}]);
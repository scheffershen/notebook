"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1533],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),p=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return i.createElement(c.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=a,f=m["".concat(c,".").concat(u)]||m[u]||d[u]||r;return n?i.createElement(f,o(o({ref:t},s),{},{components:n})):i.createElement(f,o({ref:t},s))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[m]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8605:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var i=n(7462),a=(n(7294),n(3905));const r={},o="Certbot",l={unversionedId:"Certbot/Certbot",id:"Certbot/Certbot",title:"Certbot",description:"https://certbot.eff.org/docs/using.html?highlight=cron",source:"@site/docs/Certbot/Certbot.md",sourceDirName:"Certbot",slug:"/Certbot/",permalink:"/notebook/docs/Certbot/",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Certbot/Certbot.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Certbot webroot example",permalink:"/notebook/docs/Certbot/Certbot webroot example"},next:{title:"Docker is an amazingly simple and quick way to obtain a certificate",permalink:"/notebook/docs/Certbot/Docker is an amazingly simple and quick way to obtain a certificate"}},c={},p=[{value:"Getting certificates",id:"getting-certificates",level:2},{value:"Plugins",id:"plugins",level:2},{value:"Webroot",id:"webroot",level:2},{value:"Managing certificates",id:"managing-certificates",level:2},{value:"Re-creating and Updating Existing Certificates",id:"re-creating-and-updating-existing-certificates",level:2},{value:"Revoking certificates \u540a\u9500\u8bc1\u4e66",id:"revoking-certificates-\u540a\u9500\u8bc1\u4e66",level:2},{value:"Renewing certificates",id:"renewing-certificates",level:2},{value:"Modifying the Renewal Configuration File",id:"modifying-the-renewal-configuration-file",level:2},{value:"Automated Renewals",id:"automated-renewals",level:2},{value:"Setting up automated renewal",id:"setting-up-automated-renewal",level:2},{value:"privkey.pem",id:"privkeypem",level:2},{value:"fullchain.pem",id:"fullchainpem",level:2},{value:"cert.pem and chain.pem (less common)",id:"certpem-and-chainpem-less-common",level:2},{value:"Pre and Post Validation Hooks",id:"pre-and-post-validation-hooks",level:2},{value:"Certbot command-line options",id:"certbot-command-line-options",level:2},{value:"Getting help",id:"getting-help",level:2}],s={toc:p};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"certbot"},"Certbot"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://certbot.eff.org/docs/using.html?highlight=cron"},"https://certbot.eff.org/docs/using.html?highlight=cron")),(0,a.kt)("h2",{id:"getting-certificates"},"Getting certificates"),(0,a.kt)("p",null,"To obtain a certificate and also install it"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot run (== certbot)\n")),(0,a.kt)("p",null,"To just obtain the certificate without installing it anywhere,"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot certonly\n")),(0,a.kt)("p",null,"You may specify multiple domains with -d and obtain and install different certificates by running Certbot multiple times:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot certonly -d example.com -d www.example.com\n$ certbot certonly -d app.example.com -d api.example.com\n")),(0,a.kt)("h2",{id:"plugins"},"Plugins"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"--apache"),": Automates obtaining and installing a certificate with Apache.\n",(0,a.kt)("inlineCode",{parentName:"p"},"--nginx"),":  Automates obtaining and installing a certificate with Nginx.\n",(0,a.kt)("inlineCode",{parentName:"p"},"--webroot"),": Obtains a certificate by writing to the webroot directory of\nan already running webserver.\n",(0,a.kt)("inlineCode",{parentName:"p"},"--standalone"),": Uses a \u201cstandalone\u201d webserver to obtain a certificate. Requires port 80 to be available. This is useful on systems with no webserver, or when direct integration with the local webserver is not supported or not desired.\n",(0,a.kt)("inlineCode",{parentName:"p"},"--DNS plugins"),": This category of plugins automates obtaining a certificate by modifying DNS records to prove you have control over a domain. Doing domain validation in this way is the only way to obtain wildcard certificates from Let\u2019s Encrypt.\n",(0,a.kt)("inlineCode",{parentName:"p"},"--manual"),": Obtain a certificate by manually following instructions to perform domain validation yourself. Certificates created this way do not support autorenewal. Autorenewal may be enabled by providing an authentication hook script to automate the domain validation steps."),(0,a.kt)("h2",{id:"webroot"},"Webroot"),(0,a.kt)("p",null,"If you\u2019re running a local webserver for which you have the ability to modify the content being served, and you\u2019d prefer not to stop the webserver during the certificate issuance process, you can use the webroot plugin to obtain a certificate by including certonly and ",(0,a.kt)("inlineCode",{parentName:"p"},"--webroot")," on the command line. "),(0,a.kt)("p",null,"Or you could create a certificate using the manual plugin for authentication and the nginx plugin for installation. (Note that this certificate cannot be renewed automatically.)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot run -a manual -i nginx -d example.com\n")),(0,a.kt)("h2",{id:"managing-certificates"},"Managing certificates"),(0,a.kt)("p",null,"To view a list of the certificates Certbot knows about, run the ",(0,a.kt)("inlineCode",{parentName:"p"},"certificates")," subcommand:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot certificates\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Certificate Name")," shows the name of the certificate. Pass this name using the ",(0,a.kt)("inlineCode",{parentName:"p"},"--cert-name")," flag to specify a particular certificate for the ",(0,a.kt)("inlineCode",{parentName:"p"},"run"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"certonly"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"certificates"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"renew"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"delete")," commands. Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot certonly --cert-name example.com\n")),(0,a.kt)("h2",{id:"re-creating-and-updating-existing-certificates"},"Re-creating and Updating Existing Certificates"),(0,a.kt)("p",null,"You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"certonly")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"run")," subcommands to request the creation of a single new certificate even if you already have an existing certificate with some of the same domain names."),(0,a.kt)("p",null,"If a certificate is requested with ",(0,a.kt)("inlineCode",{parentName:"p"},"run")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"certonly")," specifying a certificate name that already exists, Certbot updates the existing certificate. Otherwise a new certificate is created and assigned the specified name."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"--force-renewal"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"--duplicate"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"--expand")," options control Certbot\u2019s behavior when re-creating a certificate with the same name as an existing certificate. If you don\u2019t specify a requested behavior, Certbot may ask you what you intended."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://certbot.eff.org/docs/using.html?highlight=cron"},"https://certbot.eff.org/docs/using.html?highlight=cron")),(0,a.kt)("h2",{id:"revoking-certificates-\u540a\u9500\u8bc1\u4e66"},"Revoking certificates \u540a\u9500\u8bc1\u4e66"),(0,a.kt)("h2",{id:"renewing-certificates"},"Renewing certificates"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ certbot renew --pre-hook "service nginx stop" --post-hook "service nginx start"\n')),(0,a.kt)("p",null,"An alternative form that provides for more fine-grained control over the renewal process"),(0,a.kt)("h2",{id:"modifying-the-renewal-configuration-file"},"Modifying the Renewal Configuration File"),(0,a.kt)("p",null,"For example, say that a certificate\u2019s renewal configuration file previously contained the following directives:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"archive_dir = /etc/letsencrypt/archive/example.com\ncert = /etc/letsencrypt/live/example.com/cert.pem\nprivkey = /etc/letsencrypt/live/example.com/privkey.pem\nchain = /etc/letsencrypt/live/example.com/chain.pem\nfullchain = /etc/letsencrypt/live/example.com/fullchain.pem\n")),(0,a.kt)("p",null,"The following commands could be used to specify where these files are located:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ mv /etc/letsencrypt/archive/example.com /home/user/me/certbot/example_archive\n$ sed -i 's,/etc/letsencrypt/archive/example.com,/home/user/me/certbot/example_archive,' /etc/letsencrypt/renewal/example.com.conf\n$ mv /etc/letsencrypt/live/example.com/*.pem /home/user/me/certbot/\n$ sed -i 's,/etc/letsencrypt/live/example.com,/home/user/me/certbot,g' /etc/letsencrypt/renewal/example.com.conf\n$ certbot update_symlinks\n")),(0,a.kt)("h2",{id:"automated-renewals"},"Automated Renewals"),(0,a.kt)("h2",{id:"setting-up-automated-renewal"},"Setting up automated renewal"),(0,a.kt)("h2",{id:"privkeypem"},"privkey.pem"),(0,a.kt)("p",null,"Private key for the certificate."),(0,a.kt)("h2",{id:"fullchainpem"},"fullchain.pem"),(0,a.kt)("p",null,"All certificates, including server certificate (aka leaf certificate or end-entity certificate). "),(0,a.kt)("h2",{id:"certpem-and-chainpem-less-common"},"cert.pem and chain.pem (less common)"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"cert.pem")," contains the server certificate by itself, and ",(0,a.kt)("inlineCode",{parentName:"p"},"chain.pem")," contains the additional intermediate certificate or certificates that web browsers will need in order to validate the server certificate."),(0,a.kt)("h2",{id:"pre-and-post-validation-hooks"},"Pre and Post Validation Hooks"),(0,a.kt)("h2",{id:"certbot-command-line-options"},"Certbot command-line options"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot --help all\n")),(0,a.kt)("h2",{id:"getting-help"},"Getting help"),(0,a.kt)("p",null,"logs: ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/letsencrypt")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ certbot --version\n")),(0,a.kt)("h2",{id:""}))}m.isMDXComponent=!0}}]);
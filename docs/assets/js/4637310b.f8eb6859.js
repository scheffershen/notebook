"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[19110],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(67294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=n.createContext({}),c=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(o.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,s=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),h=l,k=u["".concat(o,".").concat(h)]||u[h]||d[h]||s;return a?n.createElement(k,r(r({ref:t},p),{},{components:a})):n.createElement(k,r({ref:t},p))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var s=a.length,r=new Array(s);r[0]=h;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[u]="string"==typeof e?e:l,r[1]=i;for(var c=2;c<s;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},44914:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var n=a(87462),l=(a(67294),a(3905));const s={},r="how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04",i={unversionedId:"ElasticSearch/Installation/how-to-install-elasticsearch-kibana",id:"ElasticSearch/Installation/how-to-install-elasticsearch-kibana",title:"how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04",description:"https://www.digitalocean.com/community/tutorials/how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04",source:"@site/docs/ElasticSearch/Installation/how-to-install-elasticsearch-kibana.md",sourceDirName:"ElasticSearch/Installation",slug:"/ElasticSearch/Installation/how-to-install-elasticsearch-kibana",permalink:"/notebook/docs/ElasticSearch/Installation/how-to-install-elasticsearch-kibana",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/ElasticSearch/Installation/how-to-install-elasticsearch-kibana.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Comment installer et configurer Elasticsearch sur Ubuntu 18.04",permalink:"/notebook/docs/ElasticSearch/Installation/Comment installer et configurer Elasticsearch sur Ubuntu 18_04"},next:{title:"introduction-to-elasticsearch-in-php",permalink:"/notebook/docs/ElasticSearch/Installation/introduction-to-elasticsearch-in-php"}},o={},c=[{value:"Install Java 8",id:"install-java-8",level:2},{value:"Install Elasticsearch",id:"install-elasticsearch",level:2},{value:"Install Kibana",id:"install-kibana",level:2},{value:"Install Nginx",id:"install-nginx",level:2},{value:"Generate SSL Certificates",id:"generate-ssl-certificates",level:2}],p={toc:c};function u(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04"},"how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04"},"https://www.digitalocean.com/community/tutorials/how-to-install-elasticsearch-logstash-and-kibana-elk-stack-on-ubuntu-14-04")),(0,l.kt)("p",null,"March 10, 2015"),(0,l.kt)("h2",{id:"install-java-8"},"Install Java 8"),(0,l.kt)("p",null,"Add the Oracle Java PPA to apt:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo add-apt-repository -y ppa:webupd8team/java\n")),(0,l.kt)("p",null,"Update your apt package database:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get update\n")),(0,l.kt)("p",null,"Install the latest stable version of Oracle Java 8 with this command (and accept the license agreement that pops up):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get -y install oracle-java8-installer\n")),(0,l.kt)("h2",{id:"install-elasticsearch"},"Install Elasticsearch"),(0,l.kt)("p",null,"Run the following command to import the Elasticsearch public GPG key into apt:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ wget -qO - https://packages.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\n")),(0,l.kt)("p",null,"Create the Elasticsearch source list:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'$ echo "deb http://packages.elastic.co/elasticsearch/2.x/debian stable main" | sudo tee -a /etc/apt/sources.list.d/elasticsearch-2.x.list\n')),(0,l.kt)("p",null,"Update your apt package database:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get update\n")),(0,l.kt)("p",null,"Install Elasticsearch with this command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get -y install elasticsearch\n")),(0,l.kt)("p",null,"Let's edit the configuration:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo nano /etc/elasticsearch/elasticsearch.yml\n")),(0,l.kt)("p",null,'You will want to restrict outside access to your Elasticsearch instance (port 9200), so outsiders can\'t read your data or shutdown your Elasticsearch cluster through the HTTP API. Find the line that specifies network.host, uncomment it, and replace its value with "localhost" so it looks like this:'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"network.host: localhost\n")),(0,l.kt)("p",null,"Now start Elasticsearch:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo service elasticsearch restart\n")),(0,l.kt)("p",null,"Then run the following command to start Elasticsearch on boot up:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"}," $ sudo update-rc.d elasticsearch defaults 95 10\n")),(0,l.kt)("h2",{id:"install-kibana"},"Install Kibana"),(0,l.kt)("p",null,"Create the Kibana source list:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'$ echo "deb http://packages.elastic.co/kibana/4.4/debian stable main" | sudo tee -a /etc/apt/sources.list.d/kibana-4.4.x.list\n')),(0,l.kt)("p",null,"Update your apt package database:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get update\n")),(0,l.kt)("p",null,"Install Kibana with this command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo apt-get -y install kibana\n")),(0,l.kt)("p",null,"Open the Kibana configuration file for editing:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo nano /opt/kibana/config/kibana.yml\n")),(0,l.kt)("p",null,'In the Kibana configuration file, find the line that specifies server.host, and replace the IP address ("0.0.0.0" by default) with "localhost":   '),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'server.host: "localhost"\n')),(0,l.kt)("p",null,"Save and exit. This setting makes it so Kibana will only be accessible to the localhost. This is fine because we will use an Nginx reverse proxy to allow external access."),(0,l.kt)("p",null,"Now enable the Kibana service, and start it:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo update-rc.d kibana defaults 96 9\n$ sudo service kibana start\n")),(0,l.kt)("p",null,"Install kibana sense plugin, with this plugin you can do elasticS request on line:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/opt/kibana/bin/kibana plugin --install elastic/sense\n")),(0,l.kt)("h2",{id:"install-nginx"},"Install Nginx"),(0,l.kt)("p",null,"Use apt to install Nginx and Apache2-utils:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo apt-get install nginx apache2-utils\n")),(0,l.kt)("p",null,'Use htpasswd to create an admin user, called "kibanaadmin" (you should use another name), that can access the Kibana web interface:'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo htpasswd -c /etc/nginx/htpasswd.users kibanaadmin\n")),(0,l.kt)("p",null,"passwor: kibana_2017!"),(0,l.kt)("p",null,"Now open the Nginx default server block in your favorite editor. We will use vi:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo nano /etc/nginx/sites-available/default\n")),(0,l.kt)("p",null,"Delete the file's contents, and paste the following code block into the file. Be sure to update the server_name to match your server's name:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"server {\n    listen 80;\n\n    server_name example.com;\n\n    auth_basic \"Restricted Access\";\n    auth_basic_user_file /etc/nginx/htpasswd.users;\n\n    location / {\n        proxy_pass http://localhost:5601;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;        \n    }\n}    \n")),(0,l.kt)("p",null,"Now restart Nginx to put our changes into effect:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo service nginx restart\n")),(0,l.kt)("h2",{id:"generate-ssl-certificates"},"Generate SSL Certificates"),(0,l.kt)("p",null,"Create the directories that will store the certificate and private key with the following commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo mkdir -p /etc/pki/tls/certs\n$ sudo mkdir /etc/pki/tls/private\n")),(0,l.kt)("p",null,"Option 1: IP Address"),(0,l.kt)("p",null,"To do so, open the OpenSSL configuration file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ sudo vi /etc/ssl/openssl.cnf\n")),(0,l.kt)("p",null,"Find the ","[ v3_ca ]"," section in the file, and add this line under it (substituting in the ELK Server's private IP address):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ subjectAltName = IP: ELK_server_private_IP\n")),(0,l.kt)("p",null,"Save and exit.    "),(0,l.kt)("p",null,"Now generate the SSL certificate and private key in the appropriate locations (/etc/pki/tls/), with the following commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ cd /etc/pki/tls\n$ sudo openssl req -config /etc/ssl/openssl.cnf -x509 -days 3650 -batch -nodes -newkey rsa:2048 -keyout private/logstash-forwarder.key -out certs/logstash-forwarder.crt\n")))}u.isMDXComponent=!0}}]);
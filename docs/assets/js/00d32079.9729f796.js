"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[60043],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},h="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),h=c(n),m=o,d=h["".concat(u,".").concat(m)]||h[m]||s[m]||r;return n?a.createElement(d,l(l({ref:t},p),{},{components:n})):a.createElement(d,l({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[h]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},18413:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const r={},l="Claroline Oauth",i={unversionedId:"Symfony/Authentication/Oauth/Claroline_oauth",id:"Symfony/Authentication/Oauth/Claroline_oauth",title:"Claroline Oauth",description:"version: 12.3.7, 12.x",source:"@site/docs/Symfony/Authentication/Oauth/Claroline_oauth.md",sourceDirName:"Symfony/Authentication/Oauth",slug:"/Symfony/Authentication/Oauth/Claroline_oauth",permalink:"/notebook/docs/Symfony/Authentication/Oauth/Claroline_oauth",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Symfony/Authentication/Oauth/Claroline_oauth.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Third-party authentication - Client-side",permalink:"/notebook/docs/Symfony/Authentication/Oauth/Claroline/doc/sections/oauth/client-side"},next:{title:"OAuth2.0 - Episode 1",permalink:"/notebook/docs/Symfony/Authentication/Oauth/OAuth2_in_8_Steps/"}},u={},c=[{value:"composer.json",id:"composerjson",level:2},{value:"Password flow",id:"password-flow",level:2},{value:"oauth client",id:"oauth-client",level:2}],p={toc:c};function h(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"claroline-oauth"},"Claroline Oauth"),(0,o.kt)("p",null,"version: 12.3.7, 12.x"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://github.com/claroline"},"http://github.com/claroline")),(0,o.kt)("h2",{id:"composerjson"},"composer.json"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'"friendsofsymfony/oauth-server-bundle": "1.5.2", (oauth server)'),(0,o.kt)("li",{parentName:"ul"},'"hwi/oauth-bundle": "0.5.3", (oauth client)'),(0,o.kt)("li",{parentName:"ul"},'"symfony/symfony": "3.4.22",')),(0,o.kt)("p",null,"To do so a command line utility is available: (oauth server)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'php app/console claroline:client:create --redirect-uri="http://www.example.com/" --grant-type="authorization_code" --grant-type="password" --grant-type="refresh_token" --grant-type="token" --grant-type="client_credentials" client_name\n')),(0,o.kt)("h2",{id:"password-flow"},"Password flow"),(0,o.kt)("p",null,"Let\u2019s say you have no luxury of redirecting user to some website, then handle redirect call, all you have is just an application which is able to send HTTP requests.\nAnd you still want to somehow authenticate user on the server side, and all you have is username and password."),(0,o.kt)("p",null,"Request:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"url"),":"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"PROVIDER_HOST/oauth/v2/token")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"parameters"),":"),(0,o.kt)("blockquote",null,(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"client_id")," => CLIENT_ID"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"client_secret")," => CLIENT_SECRET"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"grant_type")," => 'password'"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"username")," => USERNAME"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"password")," => PASSWORD"))),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "access_token":"MjY1MWRhYTAyZDZlOTEyN2EzNTg4MGMwMTcyYjczY2Y0MWI3NzZjODc1OGM2NDdjODgxZjY3YzEyMDdhZjU0Yg",\n    "expires_in":3600,\n    "token_type":"bearer",\n    "scope":null,\n    "refresh_token":"MDNmNzBmNWQ2NzdhYWVmYjE2NjI3ZjAyZTM4Y2Q1NDRiNDY1YjUyZGE1ZDk0ODZjYmU0MDM0NTQxNjhiZmU3ZA"\n}\n')),(0,o.kt)("h2",{id:"oauth-client"},"oauth client"),(0,o.kt)("p",null,"Manager:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- authentication\\Manager\\Oauth\\OauthManager.php (oauth client)\n")),(0,o.kt)("p",null,"Controller:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- core\\Controller\\Administration\\OauthController.php\n- core\\Controller\\API\\Admin\\ClientController.php\n- Claroline\\AuthenticationBundle\\Controller\\API\\Oauth;  (oauth client)\n- Claroline\\AuthenticationBundle\\Controller\\Oauth; (oauth client)\n- Claroline\\CoreBundle\\Controller\\API\\Admin\n- core\\Controller\\OauthController.php\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"DependencyInjection:",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"- authentication\\DependencyInjection\\Compiler\\OauthConfigPass.php\n")))),(0,o.kt)("p",null,"Entity:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- Claroline\\AuthenticationBundle\\Entity\\Oauth, claro_oauth_user, OauthUser\n- Claroline\\CoreBundle\\Entity\\Oauth\\Client\n- Claroline\\CoreBundle\\Entity\\Oauth\\FriendRequest;\n- Claroline\\CoreBundle\\Entity\\Oauth\\PendingFriend;\n")),(0,o.kt)("p",null,"Form: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- Claroline\\AuthenticationBundle\\Form\\Oauth, OauthConfigurationType, \n- Claroline\\CoreBundle\\Form\\Administration\\OauthClientType;\n- \n")),(0,o.kt)("p",null,"Model:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- Claroline\\AuthenticationBundle\\Model\\Oauth; (oauth client)\n")),(0,o.kt)("p",null,"Listener: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- Claroline\\AuthenticationBundle\\Listener\\Oauth (oauth client)\n")),(0,o.kt)("p",null,"Config: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- authentication\\Resources\\config\\routing.yml\n- authentication\\Resources\\config\\suggested\\hwi_oauth.yml\n")),(0,o.kt)("p",null,"Templates:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'- authentication\\Resources\\views\\oauth\\admin_form.html.twig\n- authentication\\Resources\\views\\oauth\\buttons.html.twig\n- authentication\\Resources\\views\\oauth\\connect\\check_connexion.html.twig\n- authentication\\Resources\\views\\oauth\\connect\\create_account.html.twig\n- authentication\\Resources\\views\\oauth\\connect\\link_account.html.twig\nTemplate("ClarolineCoreBundle:authentication:oauth_login.html.twig")\n')),(0,o.kt)("p",null,"Handler"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"+ authentication\\Security\\Oauth\\FailureHandler.php\n+ authentication\\Security\\Oauth\\Hwi\\GenericResourceOwner.php\n+ authentication\\Security\\Oauth\\Hwi\\ResourceOwnerFactory.php\n+ authentication\\Security\\Oauth\\LogoutSuccessHandler.php\n+ authentication\\Security\\Oauth\\OauthUserProvider.php\n+ authentication\\Serializer\\Oauth\\OauthSerializer.php\n+ authentication\\Twig\\Oauth\\OauthExtension.php\n")),(0,o.kt)("p",null,"Route:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'- fos_oauth_server_config\n- fos_oauth_server_routing\n- "claro_admin_oauth_claroline"\n- "claro_admin_oauth_clients"\n- "claro_admin_oauth_client_form"\n- "claro_admin_oauth_form_edit"\n- "claro_admin_oauth_client_create"\n- "claro_admin_oauth_client_edit"\n- "oauth_client_remove"\n- "oauth_request_friend_form"\n- "oauth_request_friend_submit"\n- "oauth_request_friend_remove",\n- "oauth_request_friend_new"\n- "oauth_friends_accept"\n- "oauth_receive_data"\n- "oauth_client_hide"\n- "oauth_request_authentication_form"\n- "oauth_request_authentication_submit"\n- Route("/oauth/v2/auth_login", name="claro_oauth_login"\n- Route("/oauth/v2/auth_login_check", name="claro_oauth_login_check"\n- Route("/oauth/v2/auth/form", name="claro_oauth_authorize_form"\n- Route("/oauth/v2/auth/submit", name="claro_oauth_authorize_submit"\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Command: ",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"- core\\Command\\CreateClientCommand.php\n")))))}h.isMDXComponent=!0}}]);
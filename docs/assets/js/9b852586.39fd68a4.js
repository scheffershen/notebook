"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[22177],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),p=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return i.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),m=a,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return t?i.createElement(h,o(o({ref:n},c),{},{components:t})):i.createElement(h,o({ref:n},c))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=t[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},94343:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var i=t(87462),a=(t(67294),t(3905));const r={sidebar_position:2},o="Linux one-line commands",l={unversionedId:"Linux/commands/Linux one-line commands",id:"Linux/commands/Linux one-line commands",title:"Linux one-line commands",description:"https://www.redhat.com/sysadmin/one-line-linux-commands",source:"@site/docs/Linux/commands/Linux one-line commands.md",sourceDirName:"Linux/commands",slug:"/Linux/commands/Linux one-line commands",permalink:"/notebook/docs/Linux/commands/Linux one-line commands",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/Linux/commands/Linux one-line commands.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Linux utils Commands",permalink:"/notebook/docs/Linux/commands/Linux utils Commands"},next:{title:"9 commands to check hard disk partitions and disk space on Linux",permalink:"/notebook/docs/Linux/commands/9 commands to check hard disk partitions and disk"}},s={},p=[{value:"1. Apply a command on files with different names",id:"1-apply-a-command-on-files-with-different-names",level:2},{value:"2. Edit a file in place",id:"2-edit-a-file-in-place",level:2},{value:"3. Share a file quickly using a web server",id:"3-share-a-file-quickly-using-a-web-server",level:2},{value:"4. Find failures with journalctl",id:"4-find-failures-with-journalctl",level:2},{value:"5. Make an encrypted backup on a remote machine",id:"5-make-an-encrypted-backup-on-a-remote-machine",level:2},{value:"6. Write instantaneous files",id:"6-write-instantaneous-files",level:2},{value:"7. Search for a file, and include some extensions and exclude others",id:"7-search-for-a-file-and-include-some-extensions-and-exclude-others",level:2},{value:"8. Monitor memory without top or htop",id:"8-monitor-memory-without-top-or-htop",level:2},{value:"9. Display disk partition sizes",id:"9-display-disk-partition-sizes",level:2},{value:"10. Quickly display a file type",id:"10-quickly-display-a-file-type",level:2},{value:"11. Display the size of an installed RPM",id:"11-display-the-size-of-an-installed-rpm",level:2},{value:"12. Display the total size of a group of files",id:"12-display-the-total-size-of-a-group-of-files",level:2},{value:"13. Update all Git repositories on a directory",id:"13-update-all-git-repositories-on-a-directory",level:2},{value:"14. Expose a web directory using containers",id:"14-expose-a-web-directory-using-containers",level:2},{value:"15. Check the weather",id:"15-check-the-weather",level:2},{value:"16. Display the top 10 IP addresses hitting a webserver",id:"16-display-the-top-10-ip-addresses-hitting-a-webserver",level:2},{value:"17. Round floats in Bash with Python&#39;s help",id:"17-round-floats-in-bash-with-pythons-help",level:2},{value:"18. Run a mini calculator",id:"18-run-a-mini-calculator",level:2},{value:"19. Convert a CSV to JSON",id:"19-convert-a-csv-to-json",level:2},{value:"20. Install and run commands with Docker",id:"20-install-and-run-commands-with-docker",level:2}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"linux-one-line-commands"},"Linux one-line commands"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.redhat.com/sysadmin/one-line-linux-commands"},"https://www.redhat.com/sysadmin/one-line-linux-commands"),"\nNovember 17, 2021 "),(0,a.kt)("h2",{id:"1-apply-a-command-on-files-with-different-names"},"1. Apply a command on files with different names"),(0,a.kt)("p",null,"The shell {} operator"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ mkdir -p -v /home/josevnz/tmp/{dir1,anotherdir,similardir}\n")),(0,a.kt)("h2",{id:"2-edit-a-file-in-place"},"2. Edit a file in place"),(0,a.kt)("p",null,"replace a string on one or more files"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ sed -i 's#ORIGINAL_VALLUE#NEW_VALUE#g' myfile1 myfile2\n")),(0,a.kt)("h2",{id:"3-share-a-file-quickly-using-a-web-server"},"3. Share a file quickly using a web server"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cd $mydir && python3 -m http.server 8888\n")),(0,a.kt)("h2",{id:"4-find-failures-with-journalctl"},"4. Find failures with journalctl"),(0,a.kt)("p",null,"find the most recent errors using a combination of ",(0,a.kt)("inlineCode",{parentName:"p"},"journalctl"),", along with the classic tools ",(0,a.kt)("inlineCode",{parentName:"p"},"sort")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"uniq"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ journalctl --no-pager --since today \\\n    --grep 'fail|error|fatal' --output json|jq '._EXE' | \\\n    sort | uniq -c | sort --numeric --reverse --key 1\n")),(0,a.kt)("h2",{id:"5-make-an-encrypted-backup-on-a-remote-machine"},"5. Make an encrypted backup on a remote machine"),(0,a.kt)("p",null,"Use ssh and tar to make secure backups"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ tar --create --directory /home/josevnz/tmp/ --file - *| \\\n    ssh raspberrypi "tar --directory /home/josevnz \\\n    --verbose --list --file -"\n')),(0,a.kt)("h2",{id:"6-write-instantaneous-files"},"6. Write instantaneous files"),(0,a.kt)("p",null,"write multiline documents:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cat<<DOC>/my/new/file\nLine1\nLine2\nA $VARIABLE\nDOC\n")),(0,a.kt)("h2",{id:"7-search-for-a-file-and-include-some-extensions-and-exclude-others"},"7. Search for a file, and include some extensions and exclude others"),(0,a.kt)("p",null,"uses the ",(0,a.kt)("inlineCode",{parentName:"p"},"grep")," way to search for specific files."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ grep -R 'import' --include='*.java' --color MySourceCodeDir\n")),(0,a.kt)("p",null,"try the ",(0,a.kt)("inlineCode",{parentName:"p"},"find")," way (use ",(0,a.kt)("inlineCode",{parentName:"p"},"xargs")," to handle a large number of matches properly):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ find MySourceCodeDir/ -name '*.java' -type f -print| xargs \\\n    grep --color 'import'\n")),(0,a.kt)("h2",{id:"8-monitor-memory-without-top-or-htop"},"8. Monitor memory without top or htop"),(0,a.kt)("p",null,"This one is almost cheating. It repeats a command, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"free"),", every five seconds and highlights the differences:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ watch -n 5 -d '/bin/free -m'\n")),(0,a.kt)("h2",{id:"9-display-disk-partition-sizes"},"9. Display disk partition sizes"),(0,a.kt)("p",null,"Use ",(0,a.kt)("inlineCode",{parentName:"p"},"lsbk")," (list block) and ",(0,a.kt)("inlineCode",{parentName:"p"},"jq")," (to manipulate a JSON on the command line) to display partition information:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ lsblk --json | jq -c '.blockdevices[]|[.name,.size]'\n")),(0,a.kt)("h2",{id:"10-quickly-display-a-file-type"},"10. Quickly display a file type"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"What is")," function is called with ",(0,a.kt)("inlineCode",{parentName:"p"},"wi"),". It quickly tells you a file's type:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ function wi { test -n "$1" && stat --printf "%F\\n" $1; }\n')),(0,a.kt)("h2",{id:"11-display-the-size-of-an-installed-rpm"},"11. Display the size of an installed RPM"),(0,a.kt)("p",null,"If you have an RPM-based system, sooner or later, you will format your queries. Here's an example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ rpm --queryformat='%12{SIZE} %{NAME}\\n' \\\n    -q java-11-openjdk-headless\n")),(0,a.kt)("h2",{id:"12-display-the-total-size-of-a-group-of-files"},"12. Display the total size of a group of files"),(0,a.kt)("p",null,"In this case, the ",(0,a.kt)("inlineCode",{parentName:"p"},"find")," command acts as a filter, displays the size of each file in bytes, and finally, shows the total size:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ t=0; for n in $(find ~/Documents -type f -name '*.py' -print | xargs \\\n    stat --printf \"%s \"); do ((t+=n)); done; echo $t\n")),(0,a.kt)("p",null,"Or, if you want a function (better), try this approach:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ function size { t=0; test -d "$1" && for n in $(find $1 \\\n    -type f -name \'*.py\' -print| \\\n    xargs stat --printf "%s "); do ((t+=n)); done; echo $t; }\n')),(0,a.kt)("h2",{id:"13-update-all-git-repositories-on-a-directory"},"13. Update all Git repositories on a directory"),(0,a.kt)("p",null,"Here's a trick to be more efficient with your updates:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ for i in */.git; do cd $(dirname $i); git pull; cd ..; done\n")),(0,a.kt)("h2",{id:"14-expose-a-web-directory-using-containers"},"14. Expose a web directory using containers"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Containers")," are critical today. This one-liner exposes a directory via ",(0,a.kt)("inlineCode",{parentName:"p"},"Podman"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ podman run --rm -v .:/usr/share/nginx/html:ro,Z \\\n    -p 30080:80 -d nginx\n")),(0,a.kt)("h2",{id:"15-check-the-weather"},"15. Check the weather"),(0,a.kt)("p",null,"Use this function to find out whether you need a jacket today:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ weather() {curl -s --connect-timeout 3 -m 5 http://wttr.in/$1}\n")),(0,a.kt)("h2",{id:"16-display-the-top-10-ip-addresses-hitting-a-webserver"},"16. Display the top 10 IP addresses hitting a webserver"),(0,a.kt)("p",null,"Here's a task web admins may use frequently with Nginx (it may also work with Apache) to grab the top 10 internet protocol addresses hitting a webserver from the access log:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cat /var/log/nginx/access.log | cut -f 1 -d ' ' | sort | \\\n    uniq -c | sort -hr | head -n 10\n")),(0,a.kt)("h2",{id:"17-round-floats-in-bash-with-pythons-help"},"17. Round floats in Bash with Python's help"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ echo "22.67892" | python3 -c "print(f\'{round(float(input()))}\')"\n')),(0,a.kt)("h2",{id:"18-run-a-mini-calculator"},"18. Run a mini calculator"),(0,a.kt)("p",null,"This function defines a quick calculator on the command line with variable precision (the default is 2). It uses ",(0,a.kt)("inlineCode",{parentName:"p"},"bc"),". Create the function like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ function qqbc() { echo "scale=${2:-2}; $1" | bc -l\n')),(0,a.kt)("p",null,"Next, perform a quick calculation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ qqbc "2/3"\n$ qqbc "2/3" 4\n')),(0,a.kt)("p",null,"This tool is called qqbc because it's an improvement on the old function ",(0,a.kt)("inlineCode",{parentName:"p"},"qbc"),".\t"),(0,a.kt)("h2",{id:"19-convert-a-csv-to-json"},"19. Convert a CSV to JSON"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'$ python3 -c \\\n    "import csv,json,sys;print(json.dumps(list(csv.reader(open(sys.argv[1])))))" \\\n    covid19-vaccinations-town-age-grp.csv\n')),(0,a.kt)("h2",{id:"20-install-and-run-commands-with-docker"},"20. Install and run commands with Docker"),(0,a.kt)("p",null,"If you have Docker installed and you want to run a command without installing a bunch of dependencies on your system"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ docker run --rm --interactive curlimages/curl curl \\\n    --verbose --location --fail --silent --output - \\\n    https://example.com\n")))}d.isMDXComponent=!0}}]);
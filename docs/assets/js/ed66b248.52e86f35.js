"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[86314],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>E});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),c=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,E=p["".concat(i,".").concat(m)]||p[m]||d[m]||s;return n?r.createElement(E,l(l({ref:t},u),{},{components:n})):r.createElement(E,l({ref:t},u))}));function E(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,l=new Array(s);l[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[p]="string"==typeof e?e:a,l[1]=o;for(var c=2;c<s;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},97392:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const s={slug:"MysqlCommandLine"},l="Mysql command line",o={unversionedId:"MySQL/Comandes/MysqlCommandLine",id:"MySQL/Comandes/MysqlCommandLine",title:"Mysql command line",description:"login by console linux",source:"@site/docs/MySQL/Comandes/MysqlCommandLine.md",sourceDirName:"MySQL/Comandes",slug:"/MySQL/Comandes/MysqlCommandLine",permalink:"/notebook/docs/MySQL/Comandes/MysqlCommandLine",draft:!1,editUrl:"https://github.com/scheffershen/notebook/tree/main/docs/MySQL/Comandes/MysqlCommandLine.md",tags:[],version:"current",frontMatter:{slug:"MysqlCommandLine"},sidebar:"tutorialSidebar",previous:{title:"mysql cluster",permalink:"/notebook/docs/MySQL/Cluster/mysql-cluster-docker"},next:{title:"Autoriser l'acc\xe8s \xe0 distance sur votre serveur MySQL",permalink:"/notebook/docs/MySQL/Configurations/Autoriser-l-acc\xe8s-\xe0-distance-sur-votre-serveur-MySQL"}},i={},c=[],u={toc:c};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mysql-command-line"},"Mysql command line"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"login by console linux")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"run mysql console")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql -u root -p\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"command in mysql console: ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'> USE partnering2015;\n> select * from Status;\n> update Status set visible = 1 where id = 1; \n> show tables;   \n> insert into BoothSuperficies (`booth_superficies`,`price`, `order`) values ("12 m2 booth package", "3500", "2");\n> delete form BoothSuperficies where id = 4;\n> \n> update `user` set InscriptionDate = `1970-01-01 00:00:00`  where InscriptionDate = \'0000-00-00\';\n> \n> ALTER TABLE `user` ADD `newsletter` TINYINT(4) NOT NULL DEFAULT \'1\' AFTER `member_ip`;\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"sql data import")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql -u root -p santesur < santesur.sql \n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"1\u3001\u521b\u5efa\u7528\u6237")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"create user hncu identified by '1234'\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"2\u3001\u521b\u5efa\u6570\u636e\u5e93*")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"CREATE DATABASE IF NOT EXISTS hncu DEFAULT CHARACTER SET 'utf8';\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"3. \u5220\u9664\u6570\u636e\u5e93")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"DROP DATABASE mydb2; \nSHOW DATABASES;\n")),(0,a.kt)("p",null,"\u4e8c\u3001\u6570\u636e\u5e93\u7f16\u7801\u95ee\u9898"),(0,a.kt)("p",null,"1\u3001\u6307\u5b9a\u6570\u636e\u5e93\u7f16\u7801"),(0,a.kt)("p",null,"\u65b9\u6cd51:  \u53ef\u4ee5\u5728MySQL\u7684\u914d\u7f6e\u6587\u4ef6\u5982my.ini\u4e2d\u6307\u5b9a\uff1a default-character-set = GBK  \u6216 default-character-set = utf8"),(0,a.kt)("p",null,"\u65b9\u6cd52\uff1a\u5728\u521b\u5efa\u6570\u636e\u5e93\u65f6\u81ea\u5df1\u6307\u5b9a\uff0c\u5982\uff1a CREATE DATABASE IF NOT EXISTS hncu DEFAULT CHARACTER SET 'utf8';"),(0,a.kt)("p",null,"2\u3001\u67e5\u770b\u6570\u636e\u5e93\u7f16\u7801"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"SHOW VARIABLES; //\u67e5\u8be2\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u53d8\u91cf\n\nSHOW VARIABLES WHERE variable_name LIKE 'character%'; //\u67e5\u8be2\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u7f16\u7801\u65b9\u9762\u7684\u53c2\u6570    \n")),(0,a.kt)("p",null,"\u7f16\u7801\u65b9\u9762\u7684\u53c2\u6570\u67e5\u8be2\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"character_set_client utf8  //\u5ba2\u6237\u7aef\u7f16\u7801 (\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u663e\u793a\u7684\u53ef\u80fd\u4e0d\u4e00\u6837\uff0c\u5982cmd\u7a97\u53e3\u548cSQLyong)\n\ncharacter_set_connection  utf8  //\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u636e\u5e93\u65f6\u7528\u7684\u7f16\u7801\n\ncharacter_set_database gbk  //\u6570\u636e\u5e93\u7684\u9ed8\u8ba4\u7f16\u7801(\u4e00\u822c\u6765\u8bb2\uff0c\u8fd9\u662f\u7531my.ini\u914d\u7f6e\u6587\u4ef6\u5b9a\u7684\u3002\u8fd9\u662f\u6ca1\u8fdb\u6570\u636e\u5e93\u65f6\u7684\u901a\u7528\u7f16\u7801)\n\ncharacter_set_filesystem binary  //\u8fd9\u662f\u6570\u636e\u5e93\u81ea\u5df1\u5b58\u50a8\u6570\u636e\u6587\u4ef6\u65f6\u7528\u7684\u7f16\u7801\uff0c\u8ddf\u6211\u4eec\u5173\u7cfb\u4e0d\u5927\n\ncharacter_set_results utf8  //\u67e5\u8be2\u4e4b\u540e\u7684\u7ed3\u679c\u96c6\u7684\u7f16\u7801\n\ncharacter_set_server gbk  //MySQL\u6570\u636e\u5e93\u670d\u52a1\u5668\u81ea\u5df1\u7684\u7f16\u7801  iso8859-1\u5728\u8fd9\u91cc\u79f0Latin1\n\ncharacter_set_system  utf8\n\ncharacter_set_dir   MySQL\u5b89\u88c5\u76ee\u5f55 \\share\\charsets\n")),(0,a.kt)("p",null,"\u5bf9\u6211\u4eec\u6765\u8bb2\uff0c\u4e3a\u4e86\u4e0d\u51fa\u73b0\u4e71\u7801\uff0c\u5fc5\u987b\u4fdd\u8bc1client\u548cconnection\u7684\u7f16\u7801\u4e00\u81f4\uff0c\u5426\u5219\u5c31\u4f1a\u4e71\u7801\u3002"),(0,a.kt)("p",null,"3\u3001\u8bbe\u7f6e\uff08\u4fee\u6539\uff09\u6570\u636e\u7f16\u7801"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"//\u5982\u4f55\u8bbe\u7f6e\u6307\u5b9a\u7684\u7f16\u7801\nset character_set_client=gbk;\n\nSET character_set_client=gbk;\n\nSHOW VARIABLES WHERE variable_name LIKE 'character%';\n\nSELECT * FROM stud;//\u539f\u6765\u7684\u6570\u636e\u663e\u793a\u6b63\u5e38\n\nINSERT INTO stud VALUES(1011,'\u57ce\u9662',20,88,'\u6570\u8ba1\u5b66\u9662');\n\nSELECT * FROM stud;//\u521a\u521a\u63d2\u5165\u7684\u90a3\u6761\u8bb0\u5f55\uff0c\u662f\u4e71\u7801 //\u56e0\u4e3a\u6211\u4eec\u8fd9\u91ccclient\u662fgbk\uff0c\u800cconnection\u662futf8\uff0c\u4e0d\u4e00\u81f4\u4e86\n\nSET character_set_connection=gbk;//\u5df2\u7ecf\u628aclient\u548cconnection\u8bbe\u6210gbk\uff0c\u4e00\u81f4\u4e86\n\nINSERT INTO stud VALUES(1012,'\u57ce\u96622',20,88,'\u6570\u8ba1\u5b66\u9662');\n\nSELECT * FROM stud;//\u663e\u793a\u521a\u521a\u63d2\u5165\u7684\u90a3\u6761\u8bb0\u5f55\uff0c\u8fd8\u662f\u4e71\u7801\u3002\u56e0\u4e3a\u6570\u636e\u5e93\u8868stud\u7684\u7f16\u7801\u662futf8\uff0c\u800c\u6211\u4eec\u5ba2\u6237\u7aef\u4e0e\u5b83\u7684\u8fde\u63a5\u90fd\u662fgbk\n")),(0,a.kt)("p",null,"6\u3001\u521b\u5efa\u89c6\u56fe"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"CREATE VIEW studView AS SELECT * FROM stud WHERE score>=60; \n\nSELECT * FROM studview;\n")),(0,a.kt)("p",null,"4\u3001\u7a7a\u503c\u67e5\u8be2    "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"//\u67e5\u8be2\u65e0\u540d\u82f1\u96c4\u5b66\u751f\u7684\u4fe1\u606f(VARCHAR)\nSELECT * FROM stud WHERE sname IS NULL;\n\n//\u67e5\u8be2\u6ca1\u6709\u5e74\u9f84\u4fe1\u606f\u7684\u5b66\u751f\nSELECT * FROM stud WHERE age IS NULL;\n")),(0,a.kt)("p",null,"6 \u3001WHERE\u5b50\u53e5+ IN\u5b50\u53e5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"//\u67e5\u8be2\u5e74\u9f84\u6700\u5c0f\u7684\u90a3\u4e2a\u4eba\u7684\u540d\u5b57\nSELECT sname FROM stud WHERE age=(SELECT MIN(age) FROM stud);\nSELECT sname FROM stud WHERE age IN(SELECT MIN(age) FROM stud);\n")),(0,a.kt)("p",null,"8\u3001distinct\uff08\u4e0d\u91cd\u590d\u7684\u503c\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"SELECT DISTINCT sname,age FROM stud GROUP BY age DESC;\n")),(0,a.kt)("p",null,"9\u3001EXISTS() \u5224\u65ad\u62ec\u53f7\u5185\u7684\u5185\u5bb9\u662f\u5426\u5b58\u5728----\u6ce8\u610f\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u53ea\u8981\u5b58\u5728\u5e74\u9f84\u4e3a26\u7684\u5b66\u751f\uff0c\u5c31\u4f1a\u8f93\u51fa\u6240\u6709\u6570\u636e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"SELECT * FROM stud WHERE EXISTS( SELECT * FROM stud WHERE age=26 );    \n")),(0,a.kt)("p",null,"10 NOT IN example"),(0,a.kt)("p",null,"find user id is not exist in user_theme"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"SELECT * FROM user WHERE UserId NOT IN (SELECT UserId FROM user_theme)\n\nSELECT id_member, member_name, FROM_UNIXTIME(date_registered, '%Y-%m-%d') as date_registered, email_address, location, member_ip FROM members WHERE date_registered > :date_registered AND id_member NOT IN (SELECT id_member FROM `themes` WHERE `variable` LIKE 'cust_newsle' AND `value` LIKE '1')\n")),(0,a.kt)("p",null,"11 Requ\xeate pour trouver les doublons absolus"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"SELECT COUNT( UserMail ) AS nbr_doublon, UserMail\nFROM user\nGROUP BY UserMail\nHAVING COUNT( UserMail ) >1\nLIMIT 0 , 30   \n")),(0,a.kt)("p",null,"12 Requ\xeate pour supprimer les doublons"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"DELETE user \nFROM user\nLEFT OUTER JOIN (\n        SELECT MIN(UserId) as id, UserMail\n        FROM user\n        GROUP BY UserMail\n    ) as t1 \n    ON user.UserId = t1.id\nWHERE t1.id IS NULL\n")),(0,a.kt)("ol",{start:14},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"JOIN example in medica source doctrine"),(0,a.kt)("p",{parentName:"li"},'$query = "SELECT T.id, T.createDate, H.createDate as endDate FROM SupportBundle:Ticket T JOIN umdsSupportBundle:TicketHistory H WHERE T.id = H.ticketId AND T.isValid = 1 AND T.interaction >= 50 AND T.interaction != 58 AND T.line = 2 AND T.createDate >= :dateStart AND T.createDate <= :dateEnd  AND T.ticketStatus != 3  AND (H.ticketStatus = \'Closed\' OR H.ticketStatus = \'Transferred\') GROUP BY H.ticketId ORDER BY H.createDate DESC ";\n$parameters = array("dateStart" => $dateStart,\n"dateEnd" => $dateEnd\n);'),(0,a.kt)("p",{parentName:"li"},"$results = $this->getEntityManager()->createQuery($query)->setParameters($parameters)->getResult();")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"NOT IN example in medica source  doctrine"),(0,a.kt)("p",{parentName:"li"},'$listInteractionEmpty = $em->createQuery("\nSELECT i FROM SupportBundle:Interaction i\nWHERE i.id NOT IN (SELECT I FROM SupportBundle:Interaction I JOIN SupportBundle:Ticket ti WHERE I.id = ti.interaction AND ti.isValid = 1 AND I.isValid = 1 GROUP BY I.id)\nAND i.isValid = 1\n");'),(0,a.kt)("p",{parentName:"li"},"$listInteraction = $listInteractionEmpty->getResult();"))))}p.isMDXComponent=!0}}]);